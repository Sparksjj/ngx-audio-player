import { __decorate, __metadata } from "tslib";
import { Component, EventEmitter, Input, Output } from '@angular/core';
import { AudioPlayerService } from '../../service/audio-player-service/audio-player.service';
import { BaseAudioPlayerFunctions } from '../base/base-audio-player.component';
let MatBasicAudioPlayerComponent = class MatBasicAudioPlayerComponent extends BaseAudioPlayerFunctions {
    constructor() {
        super();
        this.closePlayer = new EventEmitter();
        this.nextSong = new EventEmitter();
        this.previousSong = new EventEmitter();
        this.displayTitle = false;
        this.autoPlay = false;
        this.displayVolumeControls = true;
        this.audioPlayerService = new AudioPlayerService();
    }
    ngOnInit() {
        this.bindPlayerEvent();
        this.player.nativeElement.addEventListener('timeupdate', () => {
            this.audioPlayerService.setCurrentTime(this.player.nativeElement.currentTime);
        });
        if (this.autoPlay) {
            super.play();
        }
        this.volume = Math.floor(this.player.nativeElement.volume);
    }
    resetSong() {
        this.player.nativeElement.src = this.audioUrl;
    }
    startClosePlayer() {
        this.currentTime = this.player.nativeElement.currentTime;
        this.player.nativeElement.pause();
        this.closePlayer.next();
    }
    volumeChanged(e) {
        this.setVolume(e.value);
        console.log(e.value);
    }
    startNextSong() {
        this.currentTime = this.player.nativeElement.currentTime;
        this.player.nativeElement.pause();
        this.nextSong.next();
    }
    startPreviousSong() {
        this.currentTime = this.player.nativeElement.currentTime;
        this.player.nativeElement.pause();
        this.previousSong.next();
    }
};
__decorate([
    Output(),
    __metadata("design:type", Object)
], MatBasicAudioPlayerComponent.prototype, "closePlayer", void 0);
__decorate([
    Output(),
    __metadata("design:type", Object)
], MatBasicAudioPlayerComponent.prototype, "nextSong", void 0);
__decorate([
    Output(),
    __metadata("design:type", Object)
], MatBasicAudioPlayerComponent.prototype, "previousSong", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean)
], MatBasicAudioPlayerComponent.prototype, "closeBtn", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], MatBasicAudioPlayerComponent.prototype, "title", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], MatBasicAudioPlayerComponent.prototype, "audioUrl", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], MatBasicAudioPlayerComponent.prototype, "displayTitle", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], MatBasicAudioPlayerComponent.prototype, "autoPlay", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], MatBasicAudioPlayerComponent.prototype, "displayVolumeControls", void 0);
MatBasicAudioPlayerComponent = __decorate([
    Component({
        selector: 'mat-basic-audio-player',
        template: "<div class=\"d-flex ngx-basic-audio-player z-depth-1\">\n    <audio #audioPlayer\n           [src]=\"audioUrl\"></audio>\n\n    <button (click)='startPreviousSong();'\n            [disabled]=\"loaderDisplay\"\n            class=\"p-1 ngx-basic-audio-player-button\">\n        <svg width=\"15\"\n             height=\"15\"\n             viewBox=\"0 0 15 15\"\n             fill=\"none\"\n             xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M6.875 11.25V3.75L1.5625 7.5L6.875 11.25ZM7.1875 7.5L12.5 11.25V3.75L7.1875 7.5Z\"\n                  fill=\"#9098A9\" />\n        </svg>\n\n    </button>\n\n    <button (click)='playBtnHandler();'\n            [disabled]=\"loaderDisplay\"\n            class=\"ngx-basic-audio-player-button ml-1 mr-1\">\n\n        <svg *ngIf=\"loaderDisplay\"\n             height=\"34px\"\n             preserveAspectRatio=\"xMidYMid\"\n             style=\"margin: auto; display: block; shape-rendering: auto;\"\n             viewBox=\"0 0 100 100\"\n             width=\"34px\"\n             xmlns=\"http://www.w3.org/2000/svg\">\n            <g transform=\"rotate(0 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.9166666666666666s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(30 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.8333333333333334s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(60 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.75s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(90 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.6666666666666666s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(120 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.5833333333333334s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(150 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.5s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(180 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.4166666666666667s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(210 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.3333333333333333s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(240 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.25s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(270 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.16666666666666666s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(300 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.08333333333333333s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(330 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"0s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n        </svg>\n\n        <div *ngIf=\"!loaderDisplay && !isPlaying\"\n             aria-hidden=\"true\"\n             class=\"play-track\">\n            <svg width=\"28\"\n                 height=\"28\"\n                 viewBox=\"0 0 28 28\"\n                 fill=\"none\"\n                 xmlns=\"http://www.w3.org/2000/svg\">\n                <circle cx=\"14\"\n                        cy=\"14\"\n                        r=\"14\"\n                        fill=\"#306BFF\" />\n                <path d=\"M11.6875 9.8125V18.5625L18.5625 14.1875L11.6875 9.8125Z\"\n                      fill=\"white\" />\n            </svg>\n\n\n        </div>\n\n        <div *ngIf=\"!loaderDisplay && isPlaying\"\n             aria-hidden=\"true\"\n             class=\"pause-track\">\n            <svg width=\"28\"\n                 height=\"28\"\n                 viewBox=\"0 0 28 28\"\n                 fill=\"none\"\n                 xmlns=\"http://www.w3.org/2000/svg\">\n                <circle cx=\"14\"\n                        cy=\"14\"\n                        r=\"14\"\n                        fill=\"#306BFF\" />\n                <path fill-rule=\"evenodd\"\n                      clip-rule=\"evenodd\"\n                      d=\"M12.4571 9.5H11.4286C10.8605 9.5 10.4 9.90294 10.4 10.4V17.6C10.4 18.0971 10.8605 18.5 11.4286 18.5H12.4571C13.0252 18.5 13.4857 18.0971 13.4857 17.6V10.4C13.4857 9.90294 13.0252 9.5 12.4571 9.5ZM16.5715 9.5H15.5429C14.9749 9.5 14.5144 9.90294 14.5144 10.4V17.6C14.5144 18.0971 14.9749 18.5 15.5429 18.5H16.5715C17.1395 18.5 17.6 18.0971 17.6 17.6V10.4C17.6 9.90294 17.1395 9.5 16.5715 9.5ZM11.4286 10.4V17.6H12.4571V10.4H11.4286ZM15.5427 17.6V10.4H16.5713V17.6H15.5427Z\"\n                      fill=\"white\" />\n            </svg>\n\n        </div>\n    </button>\n\n    <button (click)='startNextSong();'\n            [disabled]=\"loaderDisplay\"\n            class=\"p-1 skip-next ngx-basic-audio-player-button\">\n        <svg width=\"15\"\n             height=\"15\"\n             viewBox=\"0 0 15 15\"\n             fill=\"none\"\n             xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M8.125 3.75L8.125 11.25L13.4375 7.5L8.125 3.75ZM7.8125 7.5L2.5 3.75L2.5 11.25L7.8125 7.5Z\"\n                  fill=\"#9098A9\" />\n        </svg>\n\n    </button>\n    <div class=\"flex-fill pl-1 ngx-basic-audio-player-slider\">\n        <mat-slider (change)=\"currTimePosChanged($event)\"\n                    [min]=\"startOffset\"\n                    max=\"{{duration-endOffset}}\"\n                    style=\"width: 100%\"\n                    value=\"{{currentTime}}\"></mat-slider>\n\n\n        <section *ngIf=\"displayTitle && title !== ''\"\n                 class=\"z-depth-1 song-title\">\n            <div style=\"text-align: center;\">\n                <div class=\"ngx-basic-audio-player-title\">\n                    {{ title }}\n                </div>\n            </div>\n        </section>\n\n        <div class=\"d-flex ngx-basic-audio-player-duration\">\n            <span *ngIf=\"duration !== 0.01\">\n                -{{duration-endOffset-currentTime |\n            secondsToMinutes }}\n            </span>\n        </div>\n\n    </div>\n\n    <section class=\"ngx-basic-audio-player-volume-slider\">\n        <mat-slider (change)=\"volumeChanged($event)\"\n                    min=\"0\"\n                    step=\"0.1\"\n                    max=\"1\"\n                    style=\"width: 50px\"\n                    [value]=\"volume\"></mat-slider>\n    </section>\n\n\n    <button (click)='toggleVolume();'\n            *ngIf=\"displayVolumeControls\"\n            class=\"ngx-basic-audio-player-button ml-1\">\n        <div aria-hidden=\"true\"\n             *ngIf=\"volume == 0\"\n             class=\"volume-mute\">\n\n            <svg width=\"16\"\n                 height=\"16\"\n                 viewBox=\"0 0 16 16\"\n                 fill=\"none\"\n                 xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M1.77777 5.62444V9.62444H4.44444L7.77777 12.9578V2.29111L4.44444 5.62444H1.77777Z\"\n                      fill=\"#9098A9\" />\n                <path d=\"M15 5.50357L14.4964 5L12.5 6.99643L10.5036 5L10 5.50357L11.9964 7.5L10 9.49643L10.5036 10L12.5 8.00357L14.4964 10L15 9.49643L13.0036 7.5L15 5.50357Z\"\n                      fill=\"#8E96A7\" />\n            </svg>\n\n\n        </div>\n        <div *ngIf=\"volume > 0\"\n             aria-hidden=\"true\"\n             class=\"volume-up\">\n            <svg width=\"16\"\n                 height=\"16\"\n                 viewBox=\"0 0 16 16\"\n                 fill=\"none\"\n                 xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M1.77777 5.62444V9.62444H4.44444L7.77777 12.9578V2.2911L4.44444 5.62444H1.77777ZM10.7778 7.62444C10.7778 6.44444 10.0978 5.4311 9.1111 4.93777V10.3044C10.0978 9.81777 10.7778 8.80444 10.7778 7.62444ZM9.1111 1.77777V3.1511C11.0378 3.72444 12.4444 5.5111 12.4444 7.62444C12.4444 9.73777 11.0378 11.5244 9.1111 12.0978V13.4711C11.7844 12.8644 13.7778 10.4778 13.7778 7.62444C13.7778 4.7711 11.7844 2.38444 9.1111 1.77777Z\"\n                      fill=\"#9098A9\" />\n            </svg>\n\n        </div>\n    </button>\n\n    <button *ngIf=\"closeBtn\"\n            (click)=\"startClosePlayer()\"\n            class=\"ngx-basic-audio-player-button ml-3\">\n        <svg width=\"19\"\n             height=\"19\"\n             viewBox=\"0 0 19 19\"\n             fill=\"none\"\n             xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M15.0416 5.07459L13.9254 3.95834L9.49998 8.38376L5.07456 3.95834L3.95831 5.07459L8.38373 9.50001L3.95831 13.9254L5.07456 15.0417L9.49998 10.6163L13.9254 15.0417L15.0416 13.9254L10.6162 9.50001L15.0416 5.07459Z\"\n                  fill=\"#8E96A7\" />\n        </svg>\n\n    </button>\n</div>\n",
        styles: [".ngx-basic-audio-player{width:100%}.ngx-basic-audio-player-button{padding:0;border:0;background:0;cursor:pointer}.ngx-basic-audio-player-slider{position:relative}.song-title{position:absolute;top:0;right:0;width:100%;padding-left:11px;font-style:normal;font-weight:400;font-size:12px;line-height:14px;color:#565b6e;padding-right:50px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ngx-basic-audio-player-title{text-align:left;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ngx-basic-audio-player-duration{position:absolute;top:0;right:0;font-style:normal;font-weight:400;font-size:11px;line-height:13px;color:#939aaa;padding-right:9px}.mat-slider-horizontal{min-width:initial}", "@import url(https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap-grid.min.css);mat-card,mat-slider{padding:0!important}button:focus,button:hover{outline:0!important}svg{vertical-align:top}mat-card{background:rgba(0,0,0,.02)}mat-icon>.currently-playing{height:16px!important;width:16px!important}"]
    }),
    __metadata("design:paramtypes", [])
], MatBasicAudioPlayerComponent);
export { MatBasicAudioPlayerComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0LWJhc2ljLWF1ZGlvLXBsYXllci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtYXVkaW8tcGxheWVyLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudC9tYXQtYmFzaWMtYXVkaW8tcGxheWVyL21hdC1iYXNpYy1hdWRpby1wbGF5ZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQVUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQy9FLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHlEQUF5RCxDQUFDO0FBQzdGLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBVS9FLElBQWEsNEJBQTRCLEdBQXpDLE1BQWEsNEJBQTZCLFNBQVEsd0JBQXdCO0lBOEJ4RTtRQUNFLEtBQUssRUFBRSxDQUFDO1FBNUJWLGdCQUFXLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUdqQyxhQUFRLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUU5QixpQkFBWSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFZbEMsaUJBQVksR0FBRyxLQUFLLENBQUM7UUFHckIsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUdqQiwwQkFBcUIsR0FBRyxJQUFJLENBQUM7UUFNM0IsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksa0JBQWtCLEVBQUUsQ0FBQztJQUNyRCxDQUFDO0lBRUQsUUFBUTtRQUNOLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUV2QixJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLEVBQUUsR0FBRyxFQUFFO1lBQzVELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxjQUFjLENBQ3BDLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FDdEMsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO1lBQ2pCLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUNkO1FBRUQsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzdELENBQUM7SUFFRCxTQUFTO1FBQ1AsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDaEQsQ0FBQztJQUVELGdCQUFnQjtRQUNkLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDO1FBQ3pELElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVELGFBQWEsQ0FBQyxDQUFDO1FBQ2IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDeEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdkIsQ0FBQztJQUVELGFBQWE7UUFDWCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQztRQUN6RCxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNsQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxpQkFBaUI7UUFDZixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQztRQUN6RCxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQzNCLENBQUM7Q0FDRixDQUFBO0FBMUVDO0lBREMsTUFBTSxFQUFFOztpRUFDd0I7QUFHakM7SUFEQyxNQUFNLEVBQUU7OzhEQUNxQjtBQUU5QjtJQURDLE1BQU0sRUFBRTs7a0VBQ3lCO0FBR2xDO0lBREMsS0FBSyxFQUFFOzs4REFDVTtBQUdsQjtJQURDLEtBQUssRUFBRTs7MkRBQ007QUFHZDtJQURDLEtBQUssRUFBRTs7OERBQ1M7QUFHakI7SUFEQyxLQUFLLEVBQUU7O2tFQUNhO0FBR3JCO0lBREMsS0FBSyxFQUFFOzs4REFDUztBQUdqQjtJQURDLEtBQUssRUFBRTs7MkVBQ3FCO0FBMUJsQiw0QkFBNEI7SUFSeEMsU0FBUyxDQUFDO1FBQ1QsUUFBUSxFQUFFLHdCQUF3QjtRQUNsQywwd2NBQXNEOztLQUt2RCxDQUFDOztHQUNXLDRCQUE0QixDQTZFeEM7U0E3RVksNEJBQTRCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQXVkaW9QbGF5ZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZS9hdWRpby1wbGF5ZXItc2VydmljZS9hdWRpby1wbGF5ZXIuc2VydmljZSc7XG5pbXBvcnQgeyBCYXNlQXVkaW9QbGF5ZXJGdW5jdGlvbnMgfSBmcm9tICcuLi9iYXNlL2Jhc2UtYXVkaW8tcGxheWVyLmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ21hdC1iYXNpYy1hdWRpby1wbGF5ZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vbWF0LWJhc2ljLWF1ZGlvLXBsYXllci5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogW1xuICAgICcuL21hdC1iYXNpYy1hdWRpby1wbGF5ZXIuY29tcG9uZW50LmNzcycsXG4gICAgJy4vLi4vYmFzZS9iYXNlLWF1ZGlvLXBsYXllci5jb21wb25lbnQuY3NzJyxcbiAgXSxcbn0pXG5leHBvcnQgY2xhc3MgTWF0QmFzaWNBdWRpb1BsYXllckNvbXBvbmVudCBleHRlbmRzIEJhc2VBdWRpb1BsYXllckZ1bmN0aW9uc1xuICBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBPdXRwdXQoKVxuICBjbG9zZVBsYXllciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBAT3V0cHV0KClcbiAgbmV4dFNvbmcgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKVxuICBwcmV2aW91c1NvbmcgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgQElucHV0KClcbiAgY2xvc2VCdG46IGJvb2xlYW47XG5cbiAgQElucHV0KClcbiAgdGl0bGU6IHN0cmluZztcblxuICBASW5wdXQoKVxuICBhdWRpb1VybDogc3RyaW5nO1xuXG4gIEBJbnB1dCgpXG4gIGRpc3BsYXlUaXRsZSA9IGZhbHNlO1xuXG4gIEBJbnB1dCgpXG4gIGF1dG9QbGF5ID0gZmFsc2U7XG5cbiAgQElucHV0KClcbiAgZGlzcGxheVZvbHVtZUNvbnRyb2xzID0gdHJ1ZTtcblxuICBhdWRpb1BsYXllclNlcnZpY2U6IEF1ZGlvUGxheWVyU2VydmljZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYXVkaW9QbGF5ZXJTZXJ2aWNlID0gbmV3IEF1ZGlvUGxheWVyU2VydmljZSgpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5iaW5kUGxheWVyRXZlbnQoKTtcblxuICAgIHRoaXMucGxheWVyLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsICgpID0+IHtcbiAgICAgIHRoaXMuYXVkaW9QbGF5ZXJTZXJ2aWNlLnNldEN1cnJlbnRUaW1lKFxuICAgICAgICB0aGlzLnBsYXllci5uYXRpdmVFbGVtZW50LmN1cnJlbnRUaW1lXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuYXV0b1BsYXkpIHtcbiAgICAgIHN1cGVyLnBsYXkoKTtcbiAgICB9XG5cbiAgICB0aGlzLnZvbHVtZSA9IE1hdGguZmxvb3IodGhpcy5wbGF5ZXIubmF0aXZlRWxlbWVudC52b2x1bWUpO1xuICB9XG5cbiAgcmVzZXRTb25nKCk6IHZvaWQge1xuICAgIHRoaXMucGxheWVyLm5hdGl2ZUVsZW1lbnQuc3JjID0gdGhpcy5hdWRpb1VybDtcbiAgfVxuXG4gIHN0YXJ0Q2xvc2VQbGF5ZXIoKSB7XG4gICAgdGhpcy5jdXJyZW50VGltZSA9IHRoaXMucGxheWVyLm5hdGl2ZUVsZW1lbnQuY3VycmVudFRpbWU7XG4gICAgdGhpcy5wbGF5ZXIubmF0aXZlRWxlbWVudC5wYXVzZSgpO1xuICAgIHRoaXMuY2xvc2VQbGF5ZXIubmV4dCgpO1xuICB9XG5cbiAgdm9sdW1lQ2hhbmdlZChlKSB7XG4gICAgdGhpcy5zZXRWb2x1bWUoZS52YWx1ZSk7XG4gICAgY29uc29sZS5sb2coZS52YWx1ZSk7XG4gIH1cblxuICBzdGFydE5leHRTb25nKCkge1xuICAgIHRoaXMuY3VycmVudFRpbWUgPSB0aGlzLnBsYXllci5uYXRpdmVFbGVtZW50LmN1cnJlbnRUaW1lO1xuICAgIHRoaXMucGxheWVyLm5hdGl2ZUVsZW1lbnQucGF1c2UoKTtcbiAgICB0aGlzLm5leHRTb25nLm5leHQoKTtcbiAgfVxuXG4gIHN0YXJ0UHJldmlvdXNTb25nKCkge1xuICAgIHRoaXMuY3VycmVudFRpbWUgPSB0aGlzLnBsYXllci5uYXRpdmVFbGVtZW50LmN1cnJlbnRUaW1lO1xuICAgIHRoaXMucGxheWVyLm5hdGl2ZUVsZW1lbnQucGF1c2UoKTtcbiAgICB0aGlzLnByZXZpb3VzU29uZy5uZXh0KCk7XG4gIH1cbn1cbiJdfQ==