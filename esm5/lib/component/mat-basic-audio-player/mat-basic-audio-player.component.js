import { __decorate, __extends, __metadata } from "tslib";
import { ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output, } from '@angular/core';
import { AudioPlayerService } from '../../service/audio-player-service/audio-player.service';
import { BaseAudioPlayerFunctions } from '../base/base-audio-player.component';
var MatBasicAudioPlayerComponent = /** @class */ (function (_super) {
    __extends(MatBasicAudioPlayerComponent, _super);
    function MatBasicAudioPlayerComponent(cd) {
        var _this = _super.call(this, cd) || this;
        _this.cd = cd;
        _this.closePlayer = new EventEmitter();
        _this.nextSong = new EventEmitter();
        _this.previousSong = new EventEmitter();
        _this.displayTitle = false;
        _this.autoPlay = false;
        _this.disabledSeek = false;
        _this.displayVolumeControls = true;
        _this.isFinite = isFinite;
        _this.audioPlayerService = new AudioPlayerService();
        return _this;
    }
    MatBasicAudioPlayerComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.bindPlayerEvent();
        this.player.nativeElement.addEventListener('timeupdate', function () {
            _this.audioPlayerService.setCurrentTime(_this.player.nativeElement.currentTime);
        });
        if (this.autoPlay) {
            _super.prototype.play.call(this);
        }
        this.volume = Math.floor(this.player.nativeElement.volume);
        this.cd.markForCheck();
    };
    MatBasicAudioPlayerComponent.prototype.resetSong = function () {
        this.player.nativeElement.src = this.audioUrl;
    };
    MatBasicAudioPlayerComponent.prototype.startClosePlayer = function () {
        this.currentTime = this.player.nativeElement.currentTime;
        this.player.nativeElement.pause();
        this.closePlayer.next();
        this.cd.markForCheck();
    };
    MatBasicAudioPlayerComponent.prototype.volumeChanged = function (e) {
        this.setVolume(e.value);
        this.cd.markForCheck();
    };
    MatBasicAudioPlayerComponent.prototype.startNextSong = function () {
        this.currentTime = this.player.nativeElement.currentTime;
        this.player.nativeElement.pause();
        this.nextSong.next();
        this.cd.markForCheck();
    };
    MatBasicAudioPlayerComponent.prototype.startPreviousSong = function () {
        this.currentTime = this.player.nativeElement.currentTime;
        this.player.nativeElement.pause();
        this.previousSong.next();
        this.cd.markForCheck();
    };
    MatBasicAudioPlayerComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef }
    ]; };
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], MatBasicAudioPlayerComponent.prototype, "closePlayer", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], MatBasicAudioPlayerComponent.prototype, "nextSong", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], MatBasicAudioPlayerComponent.prototype, "previousSong", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], MatBasicAudioPlayerComponent.prototype, "closeBtn", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], MatBasicAudioPlayerComponent.prototype, "title", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], MatBasicAudioPlayerComponent.prototype, "audioUrl", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], MatBasicAudioPlayerComponent.prototype, "displayTitle", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], MatBasicAudioPlayerComponent.prototype, "autoPlay", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], MatBasicAudioPlayerComponent.prototype, "disabledSeek", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], MatBasicAudioPlayerComponent.prototype, "displayVolumeControls", void 0);
    MatBasicAudioPlayerComponent = __decorate([
        Component({
            selector: 'mat-basic-audio-player',
            template: "<div class=\"d-flex ngx-basic-audio-player z-depth-1\">\n    <audio #audioPlayer\n           [src]=\"audioUrl\"></audio>\n\n    <button (click)='startPreviousSong();'\n            [disabled]=\"loaderDisplay\"\n            class=\"p-1 ngx-basic-audio-player-button\">\n        <svg width=\"15\"\n             height=\"15\"\n             viewBox=\"0 0 15 15\"\n             fill=\"none\"\n             xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M6.875 11.25V3.75L1.5625 7.5L6.875 11.25ZM7.1875 7.5L12.5 11.25V3.75L7.1875 7.5Z\"\n                  fill=\"#9098A9\" />\n        </svg>\n\n    </button>\n\n    <button (click)='playBtnHandler();'\n            [disabled]=\"loaderDisplay\"\n            class=\"ngx-basic-audio-player-button ml-1 mr-1\">\n\n        <svg *ngIf=\"loaderDisplay\"\n             height=\"34px\"\n             preserveAspectRatio=\"xMidYMid\"\n             style=\"margin: auto; display: block; shape-rendering: auto;\"\n             viewBox=\"0 0 100 100\"\n             width=\"34px\"\n             xmlns=\"http://www.w3.org/2000/svg\">\n            <g transform=\"rotate(0 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.9166666666666666s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(30 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.8333333333333334s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(60 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.75s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(90 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.6666666666666666s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(120 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.5833333333333334s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(150 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.5s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(180 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.4166666666666667s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(210 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.3333333333333333s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(240 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.25s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(270 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.16666666666666666s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(300 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"-0.08333333333333333s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n            <g transform=\"rotate(330 50 50)\">\n                <rect fill=\"#7a7a7a\"\n                      height=\"12\"\n                      rx=\"3\"\n                      ry=\"6\"\n                      width=\"6\"\n                      x=\"47\"\n                      y=\"20\">\n                    <animate attributeName=\"opacity\"\n                             begin=\"0s\"\n                             dur=\"1s\"\n                             keyTimes=\"0;1\"\n                             repeatCount=\"indefinite\"\n                             values=\"1;0\" />\n                </rect>\n            </g>\n        </svg>\n\n        <div *ngIf=\"!loaderDisplay && !isPlaying\"\n             aria-hidden=\"true\"\n             class=\"play-track\">\n            <svg width=\"28\"\n                 height=\"28\"\n                 viewBox=\"0 0 28 28\"\n                 fill=\"none\"\n                 xmlns=\"http://www.w3.org/2000/svg\">\n                <circle cx=\"14\"\n                        cy=\"14\"\n                        r=\"14\"\n                        fill=\"#306BFF\" />\n                <path d=\"M11.6875 9.8125V18.5625L18.5625 14.1875L11.6875 9.8125Z\"\n                      fill=\"white\" />\n            </svg>\n\n\n        </div>\n\n        <div *ngIf=\"!loaderDisplay && isPlaying\"\n             aria-hidden=\"true\"\n             class=\"pause-track\">\n            <svg width=\"28\"\n                 height=\"28\"\n                 viewBox=\"0 0 28 28\"\n                 fill=\"none\"\n                 xmlns=\"http://www.w3.org/2000/svg\">\n                <circle cx=\"14\"\n                        cy=\"14\"\n                        r=\"14\"\n                        fill=\"#306BFF\" />\n                <path fill-rule=\"evenodd\"\n                      clip-rule=\"evenodd\"\n                      d=\"M12.4571 9.5H11.4286C10.8605 9.5 10.4 9.90294 10.4 10.4V17.6C10.4 18.0971 10.8605 18.5 11.4286 18.5H12.4571C13.0252 18.5 13.4857 18.0971 13.4857 17.6V10.4C13.4857 9.90294 13.0252 9.5 12.4571 9.5ZM16.5715 9.5H15.5429C14.9749 9.5 14.5144 9.90294 14.5144 10.4V17.6C14.5144 18.0971 14.9749 18.5 15.5429 18.5H16.5715C17.1395 18.5 17.6 18.0971 17.6 17.6V10.4C17.6 9.90294 17.1395 9.5 16.5715 9.5ZM11.4286 10.4V17.6H12.4571V10.4H11.4286ZM15.5427 17.6V10.4H16.5713V17.6H15.5427Z\"\n                      fill=\"white\" />\n            </svg>\n\n        </div>\n    </button>\n\n    <button (click)='startNextSong();'\n            [disabled]=\"loaderDisplay\"\n            class=\"p-1 skip-next ngx-basic-audio-player-button\">\n        <svg width=\"15\"\n             height=\"15\"\n             viewBox=\"0 0 15 15\"\n             fill=\"none\"\n             xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M8.125 3.75L8.125 11.25L13.4375 7.5L8.125 3.75ZM7.8125 7.5L2.5 3.75L2.5 11.25L7.8125 7.5Z\"\n                  fill=\"#9098A9\" />\n        </svg>\n\n    </button>\n    <div class=\"flex-fill pl-1 ngx-basic-audio-player-slider\">\n        <mat-slider (change)=\"currTimePosChanged($event)\"\n                    [min]=\"startOffset\"\n                    max=\"{{duration-endOffset}}\"\n                    [disabled]=\"disabledSeek\"\n                    style=\"width: 100%\"\n                    value=\"{{currentTime}}\"></mat-slider>\n\n\n        <section *ngIf=\"displayTitle && title !== ''\"\n                 class=\"z-depth-1 song-title\">\n            <div style=\"text-align: center;\">\n                <div class=\"ngx-basic-audio-player-title\">\n                    {{ title }}\n                </div>\n            </div>\n        </section>\n\n        <div class=\"d-flex ngx-basic-audio-player-duration\"\n             *ngIf=\"isFinite(duration)\">\n            <span *ngIf=\"duration !== 0.01\">\n                -{{duration-endOffset-currentTime |\n            secondsToMinutes }}\n            </span>\n        </div>\n\n    </div>\n\n    <section class=\"ngx-basic-audio-player-volume-slider\">\n        <mat-slider (change)=\"volumeChanged($event)\"\n                    min=\"0\"\n                    step=\"0.1\"\n                    max=\"1\"\n                    style=\"width: 50px\"\n                    [value]=\"volume\"></mat-slider>\n    </section>\n\n\n    <button (click)='toggleVolume();'\n            *ngIf=\"displayVolumeControls\"\n            class=\"ngx-basic-audio-player-button ml-1\">\n        <div aria-hidden=\"true\"\n             *ngIf=\"volume == 0\"\n             class=\"volume-mute\">\n\n            <svg width=\"16\"\n                 height=\"16\"\n                 viewBox=\"0 0 16 16\"\n                 fill=\"none\"\n                 xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M1.77777 5.62444V9.62444H4.44444L7.77777 12.9578V2.29111L4.44444 5.62444H1.77777Z\"\n                      fill=\"#9098A9\" />\n                <path d=\"M15 5.50357L14.4964 5L12.5 6.99643L10.5036 5L10 5.50357L11.9964 7.5L10 9.49643L10.5036 10L12.5 8.00357L14.4964 10L15 9.49643L13.0036 7.5L15 5.50357Z\"\n                      fill=\"#8E96A7\" />\n            </svg>\n\n\n        </div>\n        <div *ngIf=\"volume > 0\"\n             aria-hidden=\"true\"\n             class=\"volume-up\">\n            <svg width=\"16\"\n                 height=\"16\"\n                 viewBox=\"0 0 16 16\"\n                 fill=\"none\"\n                 xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M1.77777 5.62444V9.62444H4.44444L7.77777 12.9578V2.2911L4.44444 5.62444H1.77777ZM10.7778 7.62444C10.7778 6.44444 10.0978 5.4311 9.1111 4.93777V10.3044C10.0978 9.81777 10.7778 8.80444 10.7778 7.62444ZM9.1111 1.77777V3.1511C11.0378 3.72444 12.4444 5.5111 12.4444 7.62444C12.4444 9.73777 11.0378 11.5244 9.1111 12.0978V13.4711C11.7844 12.8644 13.7778 10.4778 13.7778 7.62444C13.7778 4.7711 11.7844 2.38444 9.1111 1.77777Z\"\n                      fill=\"#9098A9\" />\n            </svg>\n\n        </div>\n    </button>\n\n    <button *ngIf=\"closeBtn\"\n            (click)=\"startClosePlayer()\"\n            class=\"ngx-basic-audio-player-button ml-3\">\n        <svg width=\"19\"\n             height=\"19\"\n             viewBox=\"0 0 19 19\"\n             fill=\"none\"\n             xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M15.0416 5.07459L13.9254 3.95834L9.49998 8.38376L5.07456 3.95834L3.95831 5.07459L8.38373 9.50001L3.95831 13.9254L5.07456 15.0417L9.49998 10.6163L13.9254 15.0417L15.0416 13.9254L10.6162 9.50001L15.0416 5.07459Z\"\n                  fill=\"#8E96A7\" />\n        </svg>\n\n    </button>\n</div>\n",
            styles: [".ngx-basic-audio-player{width:100%}.ngx-basic-audio-player-button{padding:0;border:0;background:0;cursor:pointer}.ngx-basic-audio-player-slider{position:relative}.song-title{position:absolute;top:0;right:0;width:100%;padding-left:11px;font-style:normal;font-weight:400;font-size:12px;line-height:14px;color:#565b6e;padding-right:50px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ngx-basic-audio-player-title{text-align:left;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ngx-basic-audio-player-duration{position:absolute;top:0;right:0;font-style:normal;font-weight:400;font-size:11px;line-height:13px;color:#939aaa;padding-right:9px}.mat-slider-horizontal{min-width:initial}", "@import url(https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap-grid.min.css);mat-card,mat-slider{padding:0!important}button:focus,button:hover{outline:0!important}svg{vertical-align:top}mat-card{background:rgba(0,0,0,.02)}mat-icon>.currently-playing{height:16px!important;width:16px!important}"]
        }),
        __metadata("design:paramtypes", [ChangeDetectorRef])
    ], MatBasicAudioPlayerComponent);
    return MatBasicAudioPlayerComponent;
}(BaseAudioPlayerFunctions));
export { MatBasicAudioPlayerComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0LWJhc2ljLWF1ZGlvLXBsYXllci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtYXVkaW8tcGxheWVyLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudC9tYXQtYmFzaWMtYXVkaW8tcGxheWVyL21hdC1iYXNpYy1hdWRpby1wbGF5ZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQ0wsaUJBQWlCLEVBQ2pCLFNBQVMsRUFDVCxZQUFZLEVBQ1osS0FBSyxFQUNMLE1BQU0sRUFDTixNQUFNLEdBQ1AsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0seURBQXlELENBQUM7QUFDN0YsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0scUNBQXFDLENBQUM7QUFVL0U7SUFBa0QsZ0RBQXdCO0lBaUN4RSxzQ0FBc0IsRUFBcUI7UUFBM0MsWUFDRSxrQkFBTSxFQUFFLENBQUMsU0FFVjtRQUhxQixRQUFFLEdBQUYsRUFBRSxDQUFtQjtRQTlCM0MsaUJBQVcsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBR2pDLGNBQVEsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBRTlCLGtCQUFZLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQVlsQyxrQkFBWSxHQUFHLEtBQUssQ0FBQztRQUdyQixjQUFRLEdBQUcsS0FBSyxDQUFDO1FBR2pCLGtCQUFZLEdBQUcsS0FBSyxDQUFDO1FBR3JCLDJCQUFxQixHQUFHLElBQUksQ0FBQztRQUc3QixjQUFRLEdBQUcsUUFBUSxDQUFDO1FBR2xCLEtBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLGtCQUFrQixFQUFFLENBQUM7O0lBQ3JELENBQUM7SUFFRCwrQ0FBUSxHQUFSO1FBQUEsaUJBZUM7UUFkQyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFFdkIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxFQUFFO1lBQ3ZELEtBQUksQ0FBQyxrQkFBa0IsQ0FBQyxjQUFjLENBQ3BDLEtBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FDdEMsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO1lBQ2pCLGlCQUFNLElBQUksV0FBRSxDQUFDO1NBQ2Q7UUFFRCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN6QixDQUFDO0lBRUQsZ0RBQVMsR0FBVDtRQUNFLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ2hELENBQUM7SUFFRCx1REFBZ0IsR0FBaEI7UUFDRSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQztRQUN6RCxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNsQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ3hCLElBQUksQ0FBQyxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDekIsQ0FBQztJQUVELG9EQUFhLEdBQWIsVUFBYyxDQUFDO1FBQ2IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN6QixDQUFDO0lBRUQsb0RBQWEsR0FBYjtRQUNFLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDO1FBQ3pELElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDckIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN6QixDQUFDO0lBRUQsd0RBQWlCLEdBQWpCO1FBQ0UsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUM7UUFDekQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDbEMsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUN6QixJQUFJLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ3pCLENBQUM7O2dCQWxEeUIsaUJBQWlCOztJQTlCM0M7UUFEQyxNQUFNLEVBQUU7O3FFQUN3QjtJQUdqQztRQURDLE1BQU0sRUFBRTs7a0VBQ3FCO0lBRTlCO1FBREMsTUFBTSxFQUFFOztzRUFDeUI7SUFHbEM7UUFEQyxLQUFLLEVBQUU7O2tFQUNVO0lBR2xCO1FBREMsS0FBSyxFQUFFOzsrREFDTTtJQUdkO1FBREMsS0FBSyxFQUFFOztrRUFDUztJQUdqQjtRQURDLEtBQUssRUFBRTs7c0VBQ2E7SUFHckI7UUFEQyxLQUFLLEVBQUU7O2tFQUNTO0lBR2pCO1FBREMsS0FBSyxFQUFFOztzRUFDYTtJQUdyQjtRQURDLEtBQUssRUFBRTs7K0VBQ3FCO0lBN0JsQiw0QkFBNEI7UUFSeEMsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLHdCQUF3QjtZQUNsQyxzMmNBQXNEOztTQUt2RCxDQUFDO3lDQWtDMEIsaUJBQWlCO09BakNoQyw0QkFBNEIsQ0FvRnhDO0lBQUQsbUNBQUM7Q0FBQSxBQXBGRCxDQUFrRCx3QkFBd0IsR0FvRnpFO1NBcEZZLDRCQUE0QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5wdXQsXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEF1ZGlvUGxheWVyU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2UvYXVkaW8tcGxheWVyLXNlcnZpY2UvYXVkaW8tcGxheWVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgQmFzZUF1ZGlvUGxheWVyRnVuY3Rpb25zIH0gZnJvbSAnLi4vYmFzZS9iYXNlLWF1ZGlvLXBsYXllci5jb21wb25lbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdtYXQtYmFzaWMtYXVkaW8tcGxheWVyJyxcbiAgdGVtcGxhdGVVcmw6ICcuL21hdC1iYXNpYy1hdWRpby1wbGF5ZXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFtcbiAgICAnLi9tYXQtYmFzaWMtYXVkaW8tcGxheWVyLmNvbXBvbmVudC5jc3MnLFxuICAgICcuLy4uL2Jhc2UvYmFzZS1hdWRpby1wbGF5ZXIuY29tcG9uZW50LmNzcycsXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIE1hdEJhc2ljQXVkaW9QbGF5ZXJDb21wb25lbnQgZXh0ZW5kcyBCYXNlQXVkaW9QbGF5ZXJGdW5jdGlvbnNcbiAgaW1wbGVtZW50cyBPbkluaXQge1xuICBAT3V0cHV0KClcbiAgY2xvc2VQbGF5ZXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgQE91dHB1dCgpXG4gIG5leHRTb25nID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KClcbiAgcHJldmlvdXNTb25nID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIEBJbnB1dCgpXG4gIGNsb3NlQnRuOiBib29sZWFuO1xuXG4gIEBJbnB1dCgpXG4gIHRpdGxlOiBzdHJpbmc7XG5cbiAgQElucHV0KClcbiAgYXVkaW9Vcmw6IHN0cmluZztcblxuICBASW5wdXQoKVxuICBkaXNwbGF5VGl0bGUgPSBmYWxzZTtcblxuICBASW5wdXQoKVxuICBhdXRvUGxheSA9IGZhbHNlO1xuXG4gIEBJbnB1dCgpXG4gIGRpc2FibGVkU2VlayA9IGZhbHNlO1xuXG4gIEBJbnB1dCgpXG4gIGRpc3BsYXlWb2x1bWVDb250cm9scyA9IHRydWU7XG5cbiAgYXVkaW9QbGF5ZXJTZXJ2aWNlOiBBdWRpb1BsYXllclNlcnZpY2U7XG4gIGlzRmluaXRlID0gaXNGaW5pdGU7XG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYpIHtcbiAgICBzdXBlcihjZCk7XG4gICAgdGhpcy5hdWRpb1BsYXllclNlcnZpY2UgPSBuZXcgQXVkaW9QbGF5ZXJTZXJ2aWNlKCk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmJpbmRQbGF5ZXJFdmVudCgpO1xuXG4gICAgdGhpcy5wbGF5ZXIubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgKCkgPT4ge1xuICAgICAgdGhpcy5hdWRpb1BsYXllclNlcnZpY2Uuc2V0Q3VycmVudFRpbWUoXG4gICAgICAgIHRoaXMucGxheWVyLm5hdGl2ZUVsZW1lbnQuY3VycmVudFRpbWVcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5hdXRvUGxheSkge1xuICAgICAgc3VwZXIucGxheSgpO1xuICAgIH1cblxuICAgIHRoaXMudm9sdW1lID0gTWF0aC5mbG9vcih0aGlzLnBsYXllci5uYXRpdmVFbGVtZW50LnZvbHVtZSk7XG4gICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIHJlc2V0U29uZygpOiB2b2lkIHtcbiAgICB0aGlzLnBsYXllci5uYXRpdmVFbGVtZW50LnNyYyA9IHRoaXMuYXVkaW9Vcmw7XG4gIH1cblxuICBzdGFydENsb3NlUGxheWVyKCkge1xuICAgIHRoaXMuY3VycmVudFRpbWUgPSB0aGlzLnBsYXllci5uYXRpdmVFbGVtZW50LmN1cnJlbnRUaW1lO1xuICAgIHRoaXMucGxheWVyLm5hdGl2ZUVsZW1lbnQucGF1c2UoKTtcbiAgICB0aGlzLmNsb3NlUGxheWVyLm5leHQoKTtcbiAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgdm9sdW1lQ2hhbmdlZChlKSB7XG4gICAgdGhpcy5zZXRWb2x1bWUoZS52YWx1ZSk7XG4gICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIHN0YXJ0TmV4dFNvbmcoKSB7XG4gICAgdGhpcy5jdXJyZW50VGltZSA9IHRoaXMucGxheWVyLm5hdGl2ZUVsZW1lbnQuY3VycmVudFRpbWU7XG4gICAgdGhpcy5wbGF5ZXIubmF0aXZlRWxlbWVudC5wYXVzZSgpO1xuICAgIHRoaXMubmV4dFNvbmcubmV4dCgpO1xuICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICBzdGFydFByZXZpb3VzU29uZygpIHtcbiAgICB0aGlzLmN1cnJlbnRUaW1lID0gdGhpcy5wbGF5ZXIubmF0aXZlRWxlbWVudC5jdXJyZW50VGltZTtcbiAgICB0aGlzLnBsYXllci5uYXRpdmVFbGVtZW50LnBhdXNlKCk7XG4gICAgdGhpcy5wcmV2aW91c1NvbmcubmV4dCgpO1xuICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gIH1cbn1cbiJdfQ==